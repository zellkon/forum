/*
 * XenForo structure.min.js
 * Copyright 2010-2018 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,f,l){d instanceof String&&(d=String(d));for(var a=d.length,b=0;b<a;b++){var c=d[b];if(f.call(l,c,b,d))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,f,l){d!=Array.prototype&&d!=Object.prototype&&(d[f]=l.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,f,l,a){if(f){l=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var b=d[a];b in l||(l[b]={});l=l[b]}d=d[d.length-1];a=l[d];f=f(a);f!=a&&null!=f&&$jscomp.defineProperty(l,d,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,l){return $jscomp.findInternal(this,d,l).v}},"es6","es3");
!function(d,f,l){XF._baseInserterOptions={after:null,append:null,before:null,prepend:null,replace:null,removeOldSelector:!0,animateReplace:!0,scrollTarget:null,href:null};XF.InserterClick=XF.Click.newHandler({eventNameSpace:"XFInserterClick",options:d.extend(!0,{},XF._baseInserterOptions),inserter:null,init:function(){this.inserter=new XF.Inserter(this.$target,this.options)},click:function(a){this.inserter.onEvent(a)}});XF.InserterFocus=XF.Element.newHandler({options:d.extend(!0,{},XF._baseInserterOptions),
inserter:null,init:function(){this.inserter=new XF.Inserter(this.$target,this.options);this.$target.one("focus",XF.proxy(this.inserter,"onEvent"))}});XF.Inserter=XF.create({options:d.extend(!0,{},XF._baseInserterOptions),$target:null,href:null,loading:!1,__construct:function(a,b){this.$target=a;this.options=d.extend(!0,{},this.options,b);(a=this.options.href||this.$target.data("inserter-href")||this.$target.attr("href"))?this.href=a:console.error("Target must have href")},onEvent:function(a){a.preventDefault();
if(!this.loading){this.loading=!0;a=d(this.options.replace);a.length&&a.addClassTransitioned("is-active");var b=this;XF.ajax("get",this.href,{},XF.proxy(this,"onLoad")).always(function(){b.loading=!1})}},onLoad:function(a){if(a.html){var b=this,c=this.options,e=c.scrollTarget,d;e&&(d=XF.findRelativeIf(e,this.$target));XF.setupHtmlInsert(a.html,function(a,d,e){b._applyChange(a,c.after,XF.proxy(b,"_applyAfter"));b._applyChange(a,c.append,XF.proxy(b,"_applyAppend"));b._applyChange(a,c.before,XF.proxy(b,
"_applyBefore"));b._applyChange(a,c.prepend,XF.proxy(b,"_applyPrepend"));b._applyChange(a,c.replace,XF.proxy(b,"_applyReplace"));e(!0);return!1});XF.layoutChange();d&&d.length&&d[0].scrollIntoView(!0)}},_applyChange:function(a,b,c){if(b&&b.length){b=b.split(",");for(var e,k,g,h=0;h<b.length;h++)e=b[h].split(" with "),k=d.trim(e[0]),g=e[1]?d.trim(e[1]):k,k.length&&g.length&&(e=d(k).first(),g=a.is(g)?a:a.find(g).first(),c(k,e,g))}},_applyAfter:function(a,b,c){b.length&&c.length&&(c.insertAfter(b),XF.activate(c),
this._removeOldSelector(a,b))},_applyAppend:function(a,b,c){b.length&&c.length&&(a=c.children(),a.appendTo(b),XF.activate(a))},_applyBefore:function(a,b,c){b.length&&c.length&&(c.insertBefore(b),XF.activate(c),this._removeOldSelector(a,b))},_applyPrepend:function(a,b,c){b.length&&c.length&&(a=c.children(),a.prependTo(b),XF.activate(a))},_applyReplace:function(a,b,c){b.length&&(a=this.options.animateReplace,XF.isIOS()&&(a=!1),c.length&&(a&&c.hide(),c.insertAfter(b)),a?b.xfFadeUp(null,function(){b.remove();
c.length&&XF.activate(c);c.xfFadeDown(null,XF.layoutChange)}):(b.remove(),c.length&&XF.activate(c)))},_removeOldSelector:function(a,b){if(this.options.removeOldSelector){var c;(c=a.match(/^\.([a-z0-9_-]+)/i))&&b.removeClass(c[1])}}});XF.MenuClick=XF.Click.newHandler({eventNameSpace:"XFMenuClick",options:{menu:null,targetOpenClass:"is-menuOpen",openClass:"is-active",completeClass:"is-complete",zIndexRef:null,menuPosRef:null,arrowPosRef:null,directionThreshold:.6},$menu:null,$menuPosRef:null,menuRef:null,
$arrowPosRef:null,arrowRef:null,pauseRepositioning:!1,scrollFunction:null,isPotentiallyFixed:!1,menuIsUp:!1,menuWidth:0,menuHeight:0,init:function(){this.options.menu&&(this.$menu=XF.findRelativeIf(this.options.menu,this.$target));this.$menu&&this.$menu.length||(this.$menu=this.$target.nextAll("[data-menu]").first());if(this.$menu.length){this.$arrowPosRef=this.$menuPosRef=this.$target;this.options.menuPosRef&&(this.$menuPosRef=XF.findRelativeIf(this.options.menuPosRef,this.$target),this.$arrowPosRef=
this.$target,this.options.arrowPosRef&&(this.$arrowPosRef=XF.findRelativeIf(this.options.arrowPosRef,this.$target),this.$menuPosRef.has(this.$arrowPosRef).length||(this.$arrowPosRef=this.$target)));this.$target.attr("aria-controls",this.$menu.xfUniqueId());this.$menu.find(".menu-arrow").length||this.$menu.prepend('<span class="menu-arrow" />');var a=this;this.$menu.data("menu-trigger",this).on("click","[data-menu-closer]",function(){a.close()}).on({"menu:open":function(){a.open(Modernizr.touchevents)},
"menu:close":function(){a.close()},"menu:reposition":function(){a.isOpen()&&a.reposition()},keydown:XF.proxy(this,"keyboardEvent")});if(XF.isIOS()&&this.$target.hasFixableParent()){var b,c;this.$menu.on({touchstart:function(e){clearTimeout(b);clearTimeout(c);a.enableIOSInputFix(d(e.currentTarget));c=setTimeout(function(){a.resetIOSInputFix()},500)},focus:function(e){clearTimeout(b);clearTimeout(c);a.enableIOSInputFixFocus(d(e.currentTarget))},blur:function(c){clearTimeout(b);b=setTimeout(function(){a.isOpen()&&
a.resetIOSInputFix()},200)}},XF.getKeyboardInputs())}var e=this.$menu.closest(".tooltip");if(e.length)e.on("tooltip:hidden",XF.proxy(this,"close"));if(e=this.$menu.data("menu-builder"))if(XF.MenuBuilder[e])XF.MenuBuilder[e](this.$menu,this.$target,this);else console.error("No menu builder "+e+" found")}else console.error("No menu found for %o",this.$target[0])},click:function(a){if(!(a.ctrlKey||a.shiftKey||a.altKey)||!this.$target.attr("href")){var b=XF.isEventTouchTriggered(a),c=!0;!b&&this.isOpen()&&
(c=!1);c&&a.preventDefault();this.toggle(b,XF.NavDeviceWatcher.isKeyboardNav())}},isOpen:function(){return this.$target.hasClass(this.options.targetOpenClass)},toggle:function(a){this.isOpen()?this.close():this.open(a)},open:function(a){var b=this.$menu,c=this.$target,e=this.$menuPosRef,k=0;if(!this.isOpen()&&!b.hasClass("is-disabled")){this.pauseRepositioning=!1;b.appendTo("body");this.updateMenuDimensions();this.updatePositionReferences();var g=this;this.$target.hasFixableParent()&&(this.scrollFunction=
function(){c.is(":hidden")?g.close():g.repositionFixed(!0)},b.addClass("menu--potentialFixed"),d(f).onPassive("scroll",this.scrollFunction));if(this.options.zIndexRef){var h=XF.findRelativeIf(this.options.zIndexRef,c);h.length&&(k=XF.getElEffectiveZIndex(h))}XF.setRelativeZIndex(b,c,0,k);XF.MenuWatcher.onOpen(b,a);this.reposition();c.attr("aria-expanded","true").addClassTransitioned(this.options.targetOpenClass);b.attr("aria-hidden","false").addClassTransitioned(this.options.openClass,XF.proxy(function(){b.addClassTransitioned(this.options.completeClass)},
this));e.addClassTransitioned(this.options.targetOpenClass);this.$target.trigger("menu:opened",[b]);b.trigger("menu:opened");if(!XF.isIOS()||!this.isPotentiallyFixed)b.on("menu:complete",function(){XF.autoFocusWithin(b,"[autofocus], [data-menu-autofocus]")});if(b.data("href")){if(!b.data("menu-loading")){b.data("menu-loading",!0);var m=b.data("nocache")?!1:!0;XF.ajax("get",b.data("href"),{},function(a){m&&b.data("href",!1);a.html&&XF.setupHtmlInsert(a.html,function(a,c,e){(c=b.data("load-target"))?
b.find(c).first().empty().html(a):b.html(a);g.$target.trigger("menu:loaded",[a,b]);g.updateMenuDimensions();e();setTimeout(XF.proxy(g,"reposition"),0);g.$target.trigger("menu:complete",[b]);b.trigger("menu:complete")})},{cache:m}).always(function(){b.data("menu-loading",!1)})}}else this.$target.trigger("menu:complete",[b]),b.trigger("menu:complete")}},reposition:function(a,b){if(!this.pauseRepositioning||a)if(!this.$menu.data("ios-scroll-timeout")||a){this.updatePositionReferences();this.$menu.css({visibility:"hidden",
display:"block",position:"",top:"",bottom:"",left:"",right:""});a=d(f).viewport();var c={};c=this.getHorizontalPosition(a,c);c=this.getVerticalPosition(a,c,b);c.display="";c.visibility="";this.$menu.css(c)}},repositionFixed:function(a){if(!this.pauseRepositioning){var b=this.$menu;if(a&&XF.isIOS()){a=b.data("ios-scroll-timeout");var c=this;clearTimeout(a);a=setTimeout(function(){b.removeData("ios-scroll-timeout");c.reposition()},300);b.data("ios-scroll-timeout",a)}else{this.updatePositionReferences();
var e=this.$target.data("menu-h");a=b.data("menu-reset-timer");if(e&&this.menuRef.left==e[0]&&this.menuRef.width==e[1]){e=d(f).viewport();var k=this.$target.hasFixedParent()?"fixed":"absolute",g={top:parseInt(b.css("top"),10)};this.menuIsUp=this.$menu.hasClass("menu--up");a&&clearTimeout(a);"fixed"==k&&k!=b.css("position")?(g={"transition-property":"none"},g=this.getVerticalFixedPosition(e,g)):"absolute"==k&&(g={"transition-property":"none"},g=this.getVerticalAbsolutePosition(e,g));b.css(g).toggleClass("menu--up",
this.menuIsUp);a=setTimeout(function(){b.css("transition-property","")},250);b.data("menu-reset-timer",a)}else this.reposition()}}},getHorizontalPosition:function(a,b){var c=!1,e=0;this.menuWidth>a.width?e=this.menuRef.left-a.left:this.menuRef.left+this.menuRef.width/2>a.width*this.options.directionThreshold&&(e=0-this.menuWidth+this.menuRef.width,c=!0);e=Math.min(e,a.right-this.menuWidth-this.menuRef.left-5);e=Math.max(e,a.left-this.menuRef.left+5);b.left=this.menuRef.left+e;this.$target.data("menu-h",
[this.menuRef.left,this.menuRef.width,e]);this.$menu.toggleClass("menu--left",!c).toggleClass("menu--right",c);this.$menu.find(".menu-arrow").css({top:"",left:this.arrowRef.left-this.menuRef.left+this.arrowRef.width/2-e});return b},getVerticalPosition:function(a,b,c){this.menuIsUp=!1;b=!c&&this.$target.hasFixedParent()?this.getVerticalFixedPosition(a,b):this.getVerticalAbsolutePosition(a,b);this.$menu.toggleClass("menu--up",this.menuIsUp);return b},getVerticalFixedPosition:function(a,b){b.top=Math.max(0,
Math.round(this.menuRef.bottom)-a.top)-this.getTopShift();b.position="fixed";b.top+this.menuHeight+a.top>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top="",b.bottom=a.bottom-this.menuRef.top+5,this.menuIsUp=!0):this.menuIsUp=!1;return b},getVerticalAbsolutePosition:function(a,b){b.top=this.menuRef.bottom-this.getTopShift();b.position="";b.top+this.menuHeight>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top="",b.bottom=a.height-this.menuRef.top+5,this.menuIsUp=!0):this.menuIsUp=!1;return b},
getTopShift:function(){return this.$menu.hasClass("menu--structural")?parseInt(XF.config.borderSizeFeature,10):0},updateMenuDimensions:function(){this.menuWidth=this.$menu.outerWidth(!0);this.menuHeight=this.$menu.outerHeight(!0);return{menuWidth:this.menuWidth,menuHeight:this.menuHeight}},updatePositionReferences:function(){this.menuRef=this.$menuPosRef.dimensions(!0);this.arrowRef=this.$arrowPosRef==this.$menuPosRef?this.menuRef:this.$arrowPosRef.dimensions(!0);return{menuRef:this.menuRef,arrowRef:this.arrowRef}},
close:function(){if(this.isOpen()){var a=this.$menu;this.$target.attr("aria-expanded","false").removeClassTransitioned(this.options.targetOpenClass);a.attr("aria-hidden","true").removeClass(this.options.completeClass).removeClassTransitioned(this.options.openClass);this.$menuPosRef.removeClassTransitioned(this.options.targetOpenClass);d(f).offPassive("scroll",this.scrollFunction);XF.MenuWatcher.onClose(a);this.$target.trigger("menu:closed",[a]);a.trigger("menu:closed");this.resetIOSInputFix()}},enableIOSInputFix:function(a){XF.isIOS()&&
(this.reposition(!1,!0),this.pauseRepositioning=!0)},enableIOSInputFixFocus:function(a){if(this.$target.hasFixedParent()){var b=f.scrollY,c=this.$menu,e=d("body");"relative"!=e.css("position")&&(this.pauseRepositioning=!0,c.css({position:"absolute",top:b,"transition-property":"none"}),setTimeout(function(){c.css("transition-property","")},200),d("html").css("overflow","hidden"),e.css({position:"relative",top:-b,"margin-bottom":-b}),a[0].scrollIntoView(),f.scrollBy(0,-100))}},resetIOSInputFix:function(){if(XF.isIOS()){var a=
d("body");if("relative"==a.css("position")){var b=(-1*parseInt(a.css("top"),10)||0)+f.scrollY;a.css({position:"",top:"","margin-bottom":""});d("html").css("overflow","");f.scrollTo(0,b)}this.pauseRepositioning=!1;this.isOpen()&&this.reposition()}},keyboardEvent:function(a){if(("ArrowUp"==a.key||"ArrowDown"==a.key)&&XF.Keyboard.isShortcutAllowed(l.activeElement)&&d(l.activeElement).closest(".menu").get(0)==this.$menu.get(0)){var b=d(l.activeElement),c=b.closest(".menu").find("a");b=c.index(b)+("ArrowUp"==
a.key?-1:1);0>b?b=c.length-1:b>=c.length&&(b=0);d(c.get(b)).focus();a.preventDefault();return!1}}});XF.MenuWatcher=function(){var a=d([]),b=null,c=!1,e=function(a){g(a.target)},k=function(b){a.trigger("menu:reposition")},g=function(b){if(!c){c=!0;var e=d(b);a.each(function(){var a=d(this).data("menu-trigger"),b=a?a.$target:null;e.closest(this).length||b&&e.closest(b).length||a&&a.close()});c=!1}};return{onOpen:function(c,g){b||(b=d('<div class="menuOutsideClicker" />').on("click",e).insertBefore(c));
a.length||(d(l).on("click",e),d(f).onPassive("resize",k),g&&b.addClass("is-active"));a=a.add(c)},onClose:function(c){a=a.not(c);a.length||(d(l).off("click",e),d(f).offPassive("resize",k),b&&b.removeClass("is-active"));g(c)},closeAll:function(){c=!0;a.trigger("menu:close");c=!1},closeUnrelated:g}}();XF.MenuBuilder={actionBar:function(a,b,c){var e=a.find(".js-menuBuilderTarget");b.closest(".actionBar-set").find(".actionBar-action--menuItem").each(function(){var a=d(this).clone();a.removeClass().addClass("menu-linkRow");
e.append(a)});XF.activate(e)},dataList:function(a,b,c){var e=a.find(".js-menuBuilderTarget");b.closest(".dataList-row").find(".dataList-cell--responsiveMenuItem").each(function(){d(this).clone().children().each(function(){var a=d(this);a.is("a")?a.removeClass().addClass("menu-linkRow"):a.wrap('<div class="menu-row"></div>');e.append(a)})});XF.activate(e)}};XF.MenuProxy=XF.Click.newHandler({eventNameSpace:"XFMenuProxy",options:{trigger:null},$trigger:null,init:function(){this.$trigger=XF.findRelativeIf(this.options.trigger,
this.$target);if(!this.$trigger||!this.$trigger.length)throw Error("Specified menu trigger not found");},click:function(a){setTimeout(XF.proxy(function(){this.$trigger.trigger("click",[a])},this),0)}});XF.OffCanvasClick=XF.Click.newHandler({eventNameSpace:"XFOffCanvasClick",options:{menu:null,openClass:"is-active"},$menu:null,init:function(){this.options.menu&&(this.$menu=XF.findRelativeIf(this.options.menu,this.$target));this.$menu&&this.$menu.length||(this.$menu=this.$target.nextAll("[data-menu]").first());
if(this.$menu.length){this.$menu.on("click","[data-menu-close]",XF.proxy(this,"closeTrigger")).on("off-canvas:close",XF.proxy(this,"closeTrigger")).on("off-canvas:open",XF.proxy(this,"openTrigger"));var a=this.$menu.data("ocm-builder");if(a)if(XF.OffCanvasBuilder[a])XF.OffCanvasBuilder[a](this.$menu,this);else console.error("No off canvas builder "+a+" found")}else console.error("No menu found for %o",this.$target[0])},click:function(a){a.preventDefault();this.toggle()},isOpen:function(){return this.$menu.hasClass(this.options.openClass)},
toggle:function(){this.isOpen()?this.close():this.open()},openTrigger:function(a){a.preventDefault();this.open()},open:function(){if(!this.isOpen()){var a=this.$menu;this.addOcmClasses(a);a.attr("aria-hidden","false").trigger("off-canvas:opening");a.addClassTransitioned(this.options.openClass,function(){a.trigger("off-canvas:opened")});XF.Modal.open()}},addOcmClasses:function(a){var b=a.attr("data-ocm-class");b&&a.addClass(b);a.find("[data-ocm-class]").each(function(){var a=d(this);a.addClass(a.attr("data-ocm-class"))})},
removeOcmClasses:function(a){var b=a.attr("data-ocm-class");b&&a.removeClass(b);a.find("[data-ocm-class]").each(function(){var a=d(this);a.removeClass(a.attr("data-ocm-class"))})},closeTrigger:function(a,b){a.preventDefault();this.close(b&&b.instant)},close:function(a){if(this.isOpen()){var b=this.$menu,c=this;b.attr("aria-hidden","true").trigger("off-canvas:closing");b.removeClassTransitioned(this.options.openClass,function(){b.trigger("off-canvas:closed");c.removeOcmClasses(b)},a);XF.Modal.close()}}});
XF.OffCanvasBuilder={navigation:function(a,b){a.appendTo("body");var c=d('<ul class="offCanvasMenu-list" />');d(".js-offCanvasNavSource .p-navEl").each(function(){var a=d(this),b=a.hasClass("is-selected"),g=a.find(".p-navEl-link"),h=a.find("[data-menu]");a.data("has-children")&&!h.length&&(a=a.find('[data-xf-click~="menu"]').first().data("xf-click-handlers"))&&a.menu&&(h=a.menu.$menu);if(g.length){a=d('<div class="offCanvasMenu-linkHolder" />');var f=g.clone();g=d("<li />");f.removeClass("p-navEl-link p-navEl-link--menuTrigger p-navEl-link--splitMenu").addClass("offCanvasMenu-link");
a.html(f);b&&(g.addClass("is-selected"),a.addClass("is-selected"));g.html(a);if(h.length){f=d('<a class="offCanvasMenu-link offCanvasMenu-link--splitToggle" data-xf-click="toggle" data-target="< :up :next" role="button" tabindex="0" />');b&&f.addClass("is-active");a.append(f);var n=d('<ul class="offCanvasMenu-subList" />');b&&n.addClass("is-active");h.find(".menu-linkRow").each(function(){var a=d(this),b=d("<li />");b.html(a.clone().removeClass("menu-linkRow").addClass("offCanvasMenu-link"));n.append(b)});
g.append(n)}c.append(g)}});a=a.find(".js-offCanvasNavTarget").append(c);XF.activate(a)},sideNav:function(a,b){var c=a.find(".offCanvasMenu-content"),e=b.$target;c.find("[data-menu-close]").length||(b=c.find(".block-header:first"),b.length||(b=d('<div class="offCanvasMenu-header offCanvasMenu-header--separated offCanvasMenu-shown" />'),b.html(e.html()),c.prepend(b)),b.append('<a class="offCanvasMenu-closer" data-menu-close="true" role="button" tabindex="0" />'));d(f).onPassive("resize",function(){e.is(":visible")||
a.trigger("off-canvas:close")})}};XF.OverlayClick=XF.Click.newHandler({eventNameSpace:"XFOverlayClick",options:{cache:!0,overlayConfig:{},forceFlashMessage:!1,followRedirects:!1},overlay:null,loadUrl:null,loading:!1,visible:!1,init:function(){var a=this.getOverlayHtml();if(a)this.setupOverlay(new XF.Overlay(a,this.options.overlayConfig));else{a=this.getLoadUrl();if(!a)throw Error("Could not find an overlay for target");this.loadUrl=a}},click:function(a){a.preventDefault();this.toggle()},toggle:function(){this.overlay?
this.overlay.toggle():this.show()},show:function(){if(this.overlay)this.overlay.show();else if(!this.loading){this.loading=!0;var a=this,b={cache:this.options.cache,beforeShow:function(b){a.overlay=b},init:XF.proxy(this,"setupOverlay")};this.options.followRedirects&&(b.onRedirect=function(b,d){a.options.forceFlashMessage?XF.flashMessage(b.message,1E3,function(){XF.redirect(b.redirect)}):XF.redirect(b.redirect)});(b=XF.loadOverlay(this.loadUrl,b,this.options.overlayConfig))?b.always(function(){setTimeout(function(){a.loading=
!1},300)}):this.loading=!1}},hide:function(){this.overlay&&this.overlay.hide()},getOverlayHtml:function(){var a=this.$target,b=a.data("target");if(b){var c=a.find(b).eq(0);c.length||(c=d(b).eq(0))}c&&c.length||(a=a.attr("href"))&&"#"==a.substr(0,1)&&(c=d(a).eq(0));c&&c.length&&!c.is(".overlay")&&(c=XF.getOverlayHtml(c));return c&&c.length?c:null},getLoadUrl:function(){var a=this.$target;return a.data("href")||a.attr("href")||null},setupOverlay:function(a){this.overlay=a;var b=this;a.on({"overlay:shown":function(){b.visible=
!0},"overlay:hidden":function(){b.visible=!1}});if(!this.options.cache&&this.loadUrl)a.on("overlay:hidden",function(){b.overlay=null});return this.overlay}});XF.OverlayClick.overlayCache={};XF.ToggleClick=XF.Click.newHandler({eventNameSpace:"XFToggleClick",options:{target:null,container:null,hide:null,activeClass:"is-active",activateParent:null,scrollTo:null},$toggleTarget:null,$toggleParent:null,toggleUrl:null,ajaxLoaded:!1,loading:!1,init:function(){this.$toggleTarget=XF.getToggleTarget(this.options.target,
this.$target);if(!this.$toggleTarget)return!1;this.options.activateParent&&(this.$toggleParent=this.$target.parent());this.toggleUrl=this.getToggleUrl()},click:function(a){a.preventDefault();this.$toggleTarget&&this.toggle()},isVisible:function(){return this.$toggleTarget.hasClass(this.options.activeClass)},isTransitioning:function(){return this.$toggleTarget.hasClass("is-transitioning")},toggle:function(){this.isVisible()?this.hide():this.show();this.$target.blur()},load:function(){var a=this.toggleUrl,
b=this;a&&!this.loading&&(this.loading=!0,XF.ajax("get",a,function(a){a.html&&XF.setupHtmlInsert(a.html,function(a,c,d){if(c=b.$toggleTarget.data("load-selector"))c=a.find(c).first(),c.length&&(a=c);b.ajaxLoaded=!0;b.$toggleTarget.append(a);XF.activate(a);d(!0);b.show();return!1})}).always(function(){b.ajaxLoaded=!0;b.loading=!1}))},hide:function(a){if(this.isVisible()&&!this.isTransitioning()){var b=this.options.activeClass;this.$toggleParent&&this.$toggleParent.removeClassTransitioned(b,XF.proxy(this,
"inactiveTransitionComplete"),a);this.$toggleTarget&&this.$toggleTarget.removeClassTransitioned(b,XF.proxy(this,"inactiveTransitionComplete"),a);this.$target.removeClassTransitioned(b,XF.proxy(this,"inactiveTransitionComplete"),a)}},show:function(a){if(!this.isVisible()&&!this.isTransitioning()&&!this.getOtherToggles().filter(".is-transitioning").length)if(this.toggleUrl&&!this.ajaxLoaded)this.load();else{this.closeOthers();var b=this.options.activeClass;this.$toggleParent&&this.$toggleParent.addClassTransitioned(b,
this.activeTransitionComplete,a);this.$toggleTarget&&this.$toggleTarget.addClassTransitioned(b,this.activeTransitionComplete,a);this.$target.addClassTransitioned(b,this.activeTransitionComplete,a);this.hideSpecified();this.scrollTo();XF.autoFocusWithin(this.$toggleTarget,"[autofocus], [data-toggle-autofocus]")}},activeTransitionComplete:function(a){d(this).trigger("toggle:shown");XF.layoutChange()},inactiveTransitionComplete:function(a){d(this).trigger("toggle:hidden");XF.layoutChange()},closeOthers:function(){this.getOtherToggles().each(function(){var a=
d(this).data("xf-click-handlers");a||(a=XF.Click.initElement(this));a&&a.toggle&&a.toggle.hide(!0)})},hideSpecified:function(){var a=d(this.options.hide);a&&a.length&&a.hide()},scrollTo:function(){if(this.options.scrollTo){var a=this.$toggleTarget,b=a.offset().top;a=a.height();var c=d(f).height();b=a<c?b-(c/2-a/2):b;d("html, body").animate({scrollTop:b},XF.config.speed.fast)}},getToggleUrl:function(){var a=this.$toggleTarget,b;return a&&(b=a.data("href"))?"trigger-href"==b?this.$target.attr("href"):
b:null},getContainer:function(){if(this.options.container){var a=this.$target.closest(this.options.container);if(a.length)return a;console.error("Container parent not found: "+this.options.container)}return null},getOtherToggles:function(){var a=this.getContainer();return a&&a.length?a.find("[data-xf-click~=toggle]").not(this.$target[0]):d([])}});XF.getToggleTarget=function(a,b){a=a?XF.findRelativeIf(a,b):b.next();if(!a.length)throw Error("No toggle target for %o",b);return a};XF.ToggleStorage=XF.Element.newHandler({options:{storageType:"local",
storageContainer:"toggle",storageKey:null,target:null,container:null,hide:null,activeClass:"is-active",activateParent:null},targetId:null,init:function(){var a=this.options.storageContainer;if(!a)throw Error("Storage container not specified for ToggleStorage handler");var b=this.options.storageKey;if(!b)throw Error("Storage key not specified for ToggleStorage handler");XF.ToggleStorageData.setStorageType(this.options.storageType);b=XF.ToggleStorageData.get(a,b);if(null!==b){var c=XF.getToggleTarget(this.options.target,
this.$target);if(c.length){var d=this.options.activeClass;this.$target.toggleClass(d,b);c.toggleClass(d,b)}}XF.ToggleStorageData.prune(a);this.$target.on("xf-click:after-click.XFToggleClick",XF.proxy(this,"updateStorage"))},updateStorage:function(){var a=this.options;XF.ToggleStorageData.set(a.storageContainer,a.storageKey,this.$target.hasClass(a.activeClass))}});XF.ToggleStorageData=function(){function a(){switch(g){case "local":return XF.LocalStorage;case "cookie":return XF.Cookie}}function b(b,
g){var h=e[b],f=function(){clearTimeout(h);e[b]=null;if(c[b]){var f=a(),g=c[b];d.isEmptyObject(g)?f.remove(b):f.setJson(b,g)}};g?f():h||(e[b]=setTimeout(f,100))}var c={},e={},f={},g="local";return{setStorageType:function(a){switch(a){case "local":case "cookie":g=a;break;default:throw Error("Storage type not supported");}},get:function(d,e,f){f||(f={});var g=f.allowExpired||!0;f=f.touch||!0;var h=a();c[d]||(c[d]=h.getJson(d));h=c[d];if(!h.hasOwnProperty(e))return null;h=h[e];var k=Math.floor(Date.now()/
1E3);if(!g&&h[0]+h[1]<k)return delete c[d][e],b(d),null;f&&(h[0]=k,c[d][e]=h,b(d));return h[2]},set:function(a,d,e,f){c[a]||(c[a]={});f||(f=14400);var g=Math.floor(Date.now()/1E3);c[a][d]=[g,f,e];b(a)},remove:function(a,d){c[a]||(c[a]={});delete c[a][d];b(a)},prune:function(d,e){var g=f[d],k=function(){clearTimeout(g);f[d]=null;var e=a();c[d]||(c[d]=e.getJson(d));e=c[d];var k=Math.floor(Date.now()/1E3),h=!1,l;for(l in e)if(e.hasOwnProperty(l)){var n=e[l];n[0]+n[1]<k&&(delete e[l],h=!0)}h&&(c[d]=e,
b(d))};e?k():g||(f[d]=setTimeout(k,100))}}}();XF.HScroller=XF.Element.newHandler({options:{scrollerClass:"hScroller-scroll",actionClass:"hScroller-action",autoScroll:".tabs-tab.is-active"},$scrollTarget:null,$goStart:null,$goEnd:null,init:function(){var a=this.$target.find("."+this.options.scrollerClass).first();if(a.length){this.$scrollTarget=a;var b,c,e=this;a.on("mousedown.horizontalScroller",function(a){a.button||(b=a.clientX,c=!1,a.preventDefault(),XF.isEventTouchTriggered(a)&&(a=d(l.activeElement),
a.is(":input")&&a.blur()),d(f).on("mouseup.horizontalScroller",function(a){d(f).off(".horizontalScroller");c&&a.preventDefault()}).on("mousemove.horizontalScroller",function(a){var d=b-a.clientX;0!=d&&(e.move(d)&&(c=!0),b=a.clientX)}))}).on("click.horizontalScroller",function(a){c&&(a.preventDefault(),a.stopImmediatePropagation(),c=!1)}).on("scroll.horizontalScroller",XF.proxy(this,"updateScroll")).on("tab:click.horizontalScroller",function(a){c&&a.preventDefault()});var k=XF.measureScrollBar(null,
"height");a.addClass("is-calculated");0!=k&&a.css("margin-bottom",parseInt(a.css("margin-bottom"),10)-k+"px");k=this.options.actionClass;this.$goStart=d('<i class="'+k+" "+k+'--start" aria-hidden="true" />').click(function(){e.step(-1)}).insertAfter(a);this.$goEnd=d('<i class="'+k+" "+k+'--end" aria-hidden="true" />').click(function(){e.step(1)}).insertAfter(a);this.updateScroll();d(l.body).on("xf:layout",XF.proxy(this,"updateScroll"));var g;d(f).on("resize",function(){g&&clearTimeout(g);g=setTimeout(XF.proxy(e,
"updateScroll"),100)});var h=a.find(this.options.autoScroll).first();if(h.length){k=this.$target.width();var m=h.position();h=h.outerWidth();m=m.left;h=m+h;XF.isRtl()?80>m&&a.normalizedScrollLeft(-h+k-50):h>k&&(h+80>k?a.normalizedScrollLeft(m-50):a.normalizedScrollLeft(m-80))}}else console.error("no scroll target")},move:function(a){var b=this.$scrollTarget,c=b.normalizedScrollLeft();XF.isRtl()&&(a*=-1);b.normalizedScrollLeft(c+a);return b.normalizedScrollLeft()!==c},step:function(a){var b=Math.max(125,
Math.floor(.25*this.$scrollTarget.width())),c="+=";switch(d.support.scrollLeftType){case "inverted":case "negative":c="-="}this.$scrollTarget.animate({scrollLeft:c+a*b},150)},updateScroll:function(){var a=this.$scrollTarget[0],b=this.$scrollTarget.normalizedScrollLeft();a=a.offsetWidth+b+1<a.scrollWidth;this.$goStart[0<b?"addClass":"removeClass"]("is-active");this.$goEnd[a?"addClass":"removeClass"]("is-active")}});XF.ResponsiveDataList=XF.Element.newHandler({options:{headerRow:".dataList-row--header",
headerCells:"th, td",rows:".dataList-row:not(.dataList-row--subSection, .dataList-row--header)",rowCells:"td",triggerWidth:"narrow"},$headerRow:null,headerText:[],$rows:null,isResponsive:!1,init:function(){var a=this.$target.find(this.options.headerRow).first(),b=[];a.find(this.options.headerCells).each(function(){var a=d(this),e=a.text();a=parseInt(a.attr("colspan"),10);b.push(d.trim(e));if(1<a)for(e=1;e<a;e++)b.push("")});this.$headerRow=a;this.headerText=b;this.$rows=this.$target.find(this.options.rows);
this.process();d(l).on("breakpoint:change",XF.proxy(this,"process"))},process:function(){var a=XF.Breakpoint.isAtOrNarrowerThan(this.options.triggerWidth);a&&this.isResponsive||!a&&!this.isResponsive||(a?this.apply():this.remove())},apply:function(){var a=this;this.$rows.each(function(){a.processRow(d(this),!0)});this.$target.addClass("dataList--responsive");this.$headerRow.addClass("dataList-row--headerResponsive");this.isResponsive=!0},remove:function(){var a=this;this.$rows.each(function(){a.processRow(d(this),
!1)});this.$target.removeClass("dataList--responsive");this.$headerRow.removeClass("dataList-row--headerResponsive");this.isResponsive=!1},processRow:function(a,b){var c=0,e=this.headerText;a.find(this.options.rowCells).each(function(){var a=d(this);if(b){var f=e[c];f&&f.length&&!a.data("hide-label")?a.attr("data-cell-label",f):a.removeAttr("data-cell-label")}else a.removeAttr("data-cell-label");c++})}});XF.Sticky=XF.Element.newHandler({options:{parent:null,inner_scrolling:!0,sticky_class:"is-sticky",
offset_top:null,spacer:null,bottoming:null,recalc_every:null},init:function(){"false"==this.options.spacer&&(this.options.spacer=!1);this.$target.stick_in_parent(this.options)}});XF.StickyHeader=XF.Element.newHandler({options:{stickyClass:"is-sticky",stickyBrokenClass:"is-sticky-broken",stickyDisabledClass:"is-sticky-disabled",minWindowHeight:251},active:null,supportsSticky:!1,stickyBroken:!1,windowTooSmall:!1,init:function(){var a=this.$target.css("position");a="sticky"==a||"-webkit-sticky"==a;var b=
!1;if(a){var c=f.navigator.userAgent.match(/Chrome\/(\d+)/);c&&60>parseInt(c[1],10)&&(b=!0,a=!1)}this.supportsSticky=a;this.stickyBroken=b;this.update();d(f).on("resize.sticky-header",XF.proxy(this,"update"))},update:function(){(this.windowTooSmall=d(f).height()<this.options.minWindowHeight)?!1!==this.active&&this._disable():this.active||this._enable()},_enable:function(){this.active=!0;var a=this.$target,b=this.options.stickyClass,c=this.options.stickyBrokenClass;a.removeClass(this.options.stickyDisabledClass);
if(this.supportsSticky){var e=!1,k=parseInt(a.css("top"),10),g=XF.isIOS(),h,l=function(c){var d=a[0].getBoundingClientRect().top;d<k||d==k&&0<f.scrollY?e||(a.addClass(b),e=!0):e&&(g&&c?(clearTimeout(h),h=setTimeout(function(){l(!1)},200)):(a.removeClass(b),e=!1))};d(f).on("scroll.sticky-header",function(){l(!0)});l(!1)}else this.stickyBroken&&setTimeout(function(){a.addClass(c)},0),a.stick_in_parent({sticky_class:b})},_disable:function(){this.active=!1;var a=this.$target,b=this.options.stickyClass,
c=this.options.stickyBrokenClass,e=this.options.stickyDisabledClass;this.supportsSticky?d(f).off("scroll.sticky-header"):a.trigger("sticky_kit:detach").removeData("sticky_kit");a.removeClass(b).removeClass(c).addClass(e)}});XF.Tabs=XF.Element.newHandler({options:{tabs:".tabs-tab",panes:null,activeClass:"is-active",state:null},initial:0,$tabs:null,$panes:null,$activeTab:null,$activePane:null,init:function(){var a=this.$target;var b=this.$tabs=a.find(this.options.tabs);a=this.options.panes?XF.findRelativeIf(this.options.panes,
a):a.next();a.is("ol, ul")&&(a=a.find("> li"));this.$panes=a;if(b.length!=a.length)console.error("Tabs and panes contain different totals: %d tabs, %d panes",b.length,a.length),console.error("Tabs: %o, Panes: %o",b,a);else{for(a=0;a<b.length;a++)if(b.eq(a).hasClass(this.options.activeClass)){this.initial=a;break}b.on("click",XF.proxy(this,"tabClick"));d(f).on("hashchange",XF.proxy(this,"onHashChange"));d(f).on("popstate",XF.proxy(this,"onPopState"));this.reactToHash()}},getSelectorFromHash:function(){var a=
"";if(1<f.location.hash.length){var b=f.location.hash.replace(/[^a-zA-Z0-9_-]/g,"");b&&b.length&&(a="#"+b)}return a},reactToHash:function(){var a=this.getSelectorFromHash();a?this.activateTarget(a):this.activateTab(this.initial)},onHashChange:function(a){this.reactToHash()},onPopState:function(a){(a=a.originalEvent.state)&&a.id?this.activateTarget("#"+a.id,!1):a&&a.offset?this.activateTab(a.offset):this.activateTab(this.initial)},activateTarget:function(a){var b=this.$tabs,c=!1,e=!1;if(a){try{var f=
d(a);c=f&&0<f.length}catch(g){c=!1}if(c)for(c=0;c<b.length;c++)b.eq(c).is(a)&&(this.activateTab(c),e=!0)}e||this.activateTab(this.initial)},activateTab:function(a){var b=this.$tabs.eq(a),c=this.$panes.eq(a),d=this.options.activeClass;b.length&&c.length?(this.$tabs.filter("."+d).removeClass(d).attr("aria-selected","false").trigger("tab:hidden"),this.$panes.filter("."+d).removeClass(d).attr("aria-expanded","false").trigger("tab:hidden"),b.addClass(d).attr("aria-selected","true").trigger("tab:shown"),
c.addClass(d).attr("aria-expanded","true").trigger("tab:shown"),XF.layoutChange(),c.data("href")&&!c.data("tab-loading")&&(c.data("tab-loading",!0),XF.ajax("get",c.data("href"),{},function(a){c.data("href",!1);if(a.html){var b=c.data("load-target");b?XF.setupHtmlInsert(a.html,c.find(b)):XF.setupHtmlInsert(a.html,c)}}).always(function(){c.data("tab-loading",!1)}))):console.error("Selected invalid tab "+a)},tabClick:function(a){var b=a.currentTarget,c=this.$tabs.index(b);if(-1==c)console.error("Did not find clicked element (%o) in tabs",
b);else{b=this.$tabs.eq(c);var e=d.Event("tab:click");b.trigger(e,this);if(!e.isDefaultPrevented()){a.preventDefault();if(Modernizr.history&&this.options.state)switch(a=f.location.href.split("#")[0],b.attr("id")?(a=a+"#"+b.attr("id"),b={id:b.attr("id")}):b={offset:c},this.options.state){case "replace":f.history.replaceState(b,"",a);break;case "push":f.history.pushState(b,"",a)}this.activateTab(c)}}}});XF.PageJump=XF.Element.newHandler({options:{pageUrl:null,pageInput:"| .js-pageJumpPage",pageSubmit:"| .js-pageJumpGo",
sentinel:"%page%"},$input:null,init:function(){var a=this;this.options.pageUrl?(this.$input=XF.findRelativeIf(this.options.pageInput,this.$target),this.$input.length?(this.$input.on("keyup",function(b){13==b.which&&(b.preventDefault(),a.go())}),XF.findRelativeIf(this.options.pageSubmit,this.$target).on("click",function(b){b.preventDefault();a.go()}),this.$target.closest(".menu").on("menu:opened",function(){a.shown()})):console.error("No input provided to page jump")):console.error("No page-url provided to page jump")},
shown:function(){this.$input.select()},go:function(){var a=parseInt(this.$input.val(),10);1>a&&(a=1);var b=this.options.pageUrl,c=this.options.sentinel,d=b.replace(c,a);d==b&&(d=b.replace(encodeURIComponent(c),a));XF.redirect(d)}});XF.QuickSearch=XF.Element.newHandler({options:{select:"| .js-quickSearch-constraint"},$select:null,init:function(){this.$select=XF.findRelativeIf(this.options.select,this.$target);this.$select.on("change",XF.proxy(this,"updateSelectWidth"));this.updateSelectWidth()},updateSelectWidth:function(){if(this.$select.length){var a=
d("<span />").addClass(this.$select.attr("class")).addClass("input--select"),b=this.$select.find("option:selected");b.length||(b=this.$select.find("option:first"));a.text(b.text());a.css("display","inline");b=d("<div />");b.css({position:"absolute",top:-200,visibility:"hidden"});b.css(XF.isRtl()?"right":"left",-9999);a.appendTo(b);b.appendTo("body");this.$select.css({width:a.outerWidth()+8,"flex-grow":0,"flex-shrink":0});b.remove()}}});XF.TouchProxy=XF.Element.newHandler({options:{allowed:":input, :checkbox, a, label, [data-tp-clickable], [data-tp-primary]"},
active:!0,timer:null,$proxy:null,init:function(){var a=this;if("InputDeviceCapabilities"in f||"sourceCapabilities"in UIEvent.prototype)this.$target.click(function(b){var c=b.originalEvent;c&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents&&a.handleTapEvent(b)});else if(Modernizr.touchevents){var b=!1;this.$target.on("touchstart",function(){b=!1}).on("touchmove",function(){b=!0}).on("touchend",function(c){b||a.handleTapEvent(c)})}},isClickable:function(a){a=d(a).closest(this.options.allowed);
return!(!a.length||!this.$target.find(a).length)},handleTapEvent:function(a){this.getProxy().length&&this.active&&!this.isClickable(a.target)&&(a.preventDefault(),this.trigger())},getProxy:function(){if(!this.$proxy){var a=this.$target.find("[data-tp-primary]").first();a.length||(a=this.$target.find("a[href]").first());this.$proxy=a}return this.$proxy},trigger:function(a){a=this.getProxy();if(a.length){this.timer&&clearTimeout(this.timer);this.active=!1;a[0].click?a[0].click():a.click();var b=this;
this.timer=setTimeout(function(){b.active=!0},500)}}});XF.Click.register("inserter","XF.InserterClick");XF.Click.register("menu","XF.MenuClick");XF.Click.register("menu-proxy","XF.MenuProxy");XF.Click.register("off-canvas","XF.OffCanvasClick");XF.Click.register("overlay","XF.OverlayClick");XF.Click.register("toggle","XF.ToggleClick");XF.Element.register("focus-inserter","XF.InserterFocus");XF.Element.register("h-scroller","XF.HScroller");XF.Element.register("page-jump","XF.PageJump");XF.Element.register("quick-search",
"XF.QuickSearch");XF.Element.register("responsive-data-list","XF.ResponsiveDataList");XF.Element.register("sticky","XF.Sticky");XF.Element.register("sticky-header","XF.StickyHeader");XF.Element.register("tabs","XF.Tabs");XF.Element.register("toggle-storage","XF.ToggleStorage");XF.Element.register("touch-proxy","XF.TouchProxy");d(l).on("xf:page-load-complete",function(){var a=f.location.hash.replace(/[^a-zA-Z0-9_-]/g,"");a&&(a=a?d("#"+a):d(),a.length&&(a=a.closest("[data-toggle-wrapper]"),a.length&&
(a=a.find('[data-xf-click~="toggle"]').first(),a.length&&(a=XF.Click.getElementHandler(a,"toggle"))&&a.show(!0))))})}(jQuery,window,document);
