/*
 * XenForo action.min.js
 * Copyright 2010-2018 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,d,f){c instanceof String&&(c=String(c));for(var h=c.length,a=0;a<h;a++){var b=c[a];if(d.call(f,b,a,c))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,f){c!=Array.prototype&&c!=Object.prototype&&(c[d]=f.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,d,f,h){if(d){f=$jscomp.global;c=c.split(".");for(h=0;h<c.length-1;h++){var a=c[h];a in f||(f[a]={});f=f[a]}c=c[c.length-1];h=f[c];d=d(h);d!=h&&null!=d&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,f){return $jscomp.findInternal(this,c,f).v}},"es6","es3");
!function(c,d,f,h){XF.AttributionClick=XF.Click.newHandler({eventNameSpace:"XFAttributionClick",options:{contentSelector:null},init:function(){},click:function(a){var b=this.options.contentSelector,g=c(b);if(g.length){try{var e=g.offset().top;"pushState"in d.history&&d.history.pushState({},"",d.location.toString().replace(/#.*$/,"")+b);c("html, body").animate({scrollTop:e},XF.config.speed.normal,function(){d.history.pushState||(d.location.hash=b)})}catch(k){d.location.hash=b}a.preventDefault()}}});
XF.LikeClick=XF.Click.newHandler({eventNameSpace:"XFLikeClick",options:{likeList:null},processing:!1,init:function(){},click:function(a){a.preventDefault();if(!this.processing){this.processing=!0;a=this.$target.attr("href");var b=this;XF.ajax("POST",a,{},XF.proxy(this,"handleAjax"),{skipDefaultSuccess:!0}).always(function(){setTimeout(function(){b.processing=!1},250)})}},handleAjax:function(a){var b=this.$target;a.addClass&&b.addClass(a.addClass);a.removeClass&&b.removeClass(a.removeClass);if(a.text){var g=
b.find(".label");g.length||(g=b);g.text(a.text)}var e=this.options.likeList?XF.findRelativeIf(this.options.likeList,b):c([]);"undefined"!==typeof a.html&&e.length&&(a.html.content?XF.setupHtmlInsert(a.html,function(a,b){e.html(a).addClassTransitioned("is-active")}):e.removeClassTransitioned("is-active",function(){e.empty()}))}});XF.PreviewClick=XF.Click.newHandler({eventNameSpace:"XFPreviewClick",options:{previewUrl:""},$form:null,$container:null,href:null,loading:!1,init:function(){var a=this.$target.closest("form"),
b=a.data("preview-url")||this.options.previewUrl||this.$target.attr("href");b?(this.$container=a.find(".js-previewContainer").first(),this.$container.length?(this.href=b,this.$form=a.on("preview:hide",XF.proxy(this,"onPreviewHide"))):console.error("Preview form must have a .js-previewContainer element")):console.error("Preview button must have a href")},click:function(a){if(this.href&&(a.preventDefault(),!this.loading)){var b=this;a=XF.getDefaultFormData(this.$form);XF.ajax("post",this.href,a,XF.proxy(this,
"onLoad")).always(function(){b.loading=!1})}},onLoad:function(a){if(a.html){var b=this;a.html.content?XF.setupHtmlInsert(a.html,function(a,c,d){b.$container.removeClassTransitioned("is-active",function(){b.$container.replaceWith(a);d();a.addClassTransitioned("is-active");b.$container=a});return!1}):$container.xfFadeUp(XF.config.speed.fast)}},onPreviewHide:function(a){this.$container.removeClassTransitioned("is-active")}});XF.handleSwitchResponse=function(a,b,g){if(b.switchKey){var e=a.data("sk-"+
b.switchKey);if(e){for(var d,f;d=e.match(/^(\s*,)?\s*(addClass|removeClass):([^,]+),/);)if(e=e.substring(d[0].length),f=c.trim(d[3]),f.length)switch(d[2]){case "addClass":a.addClass(f);break;case "removeClass":a.removeClass(f)}e=c.trim(e);e.length&&!b.text&&(b.text=e)}}b.addClass&&a.addClass(b.addClass);b.removeClass&&a.removeClass(b.removeClass);b.text&&(e=a.find(a.data("label")),e.length||(e=a),e.text(b.text));if(b.message){var h=g&&b.redirect;XF.flashMessage(b.message,h?1E3:3E3,function(){h&&XF.redirect(b.redirect)})}};
XF.ScrollToClick=XF.Click.newHandler({eventNameSpace:"XFScrollToClick",options:{target:null,silent:!1,hash:null,speed:300},$scroll:null,init:function(){var a,b=this.options.hash,g=this.$target.attr("href");this.options.target&&(a=XF.findRelativeIf(this.options.target,this.$target));if(!a||!a.length)if(g&&g.length&&"#"==g.charAt(0))a=c(g);else if(this.options.silent)return;if(a&&a.length)if(this.$scroll=a,!0===b||"true"===b)a=a.attr("id"),this.options.hash=a&&a.length?a:null;else{if(!1===b||"false"===
b)this.options.hash=null}else console.error("No scroll target could be found")},click:function(a){if(this.$scroll){a.preventDefault();var b=this.options.hash;c("html, body").animate({scrollTop:this.$scroll.offset().top},this.options.speed,null,function(){b&&(d.location.hash=b)})}}});XF.SwitchClick=XF.Click.newHandler({eventNameSpace:"XFSwitchClick",options:{redirect:!1,label:".js-label"},processing:!1,init:function(){this.$target.data("label",this.options.label)},click:function(a){a.preventDefault();
if(!this.processing){this.processing=!0;a=this.$target.attr("href");var b=this;XF.ajax("POST",a,{},XF.proxy(this,"handleAjax"),{skipDefaultSuccess:!0}).always(function(){setTimeout(function(){b.processing=!1},250)})}},handleAjax:function(a){var b=this.$target,g=c.Event("switchclick:complete");b.trigger(g,a,this);g.isDefaultPrevented()||XF.handleSwitchResponse(b,a,this.options.redirect)}});XF.SwitchOverlayClick=XF.Click.newHandler({eventNameSpace:"XFSwitchOverlayClick",options:{redirect:!1},overlay:null,
init:function(){},click:function(a){a.preventDefault();this.overlay?this.overlay.show():(a=this.$target.attr("href"),XF.loadOverlay(a,{cache:!1,init:XF.proxy(this,"setupOverlay")}))},setupOverlay:function(a){this.overlay=a;a.getOverlay().find("form").on("ajax-submit:response",XF.proxy(this,"handleOverlaySubmit"));var b=this;a.on("overlay:hidden",function(){b.overlay=null});return a},handleOverlaySubmit:function(a,b){"ok"==b.status&&(a.preventDefault(),(a=this.overlay)&&a.hide(),XF.handleSwitchResponse(this.$target,
b,this.options.redirect))}});XF.Draft=XF.Element.newHandler({options:{draftAutosave:60,draftName:"message",draftUrl:null,saveButton:".js-saveDraft",deleteButton:".js-deleteDraft",actionIndicator:".draftStatus"},lastActionContent:null,autoSaveRunning:!1,init:function(){if(this.options.draftUrl){var a=this;this.$target.on(this.options.saveButton,"click",function(b){b.preventDefault();a.triggerSave()});this.$target.on(this.options.deleteButton,"click",function(b){b.preventDefault();a.triggerDelete()});
var b=XF.proxy(this,"syncState");this.syncState();setTimeout(b,500);this.$target.on("draft:sync",b);setInterval(XF.proxy(this,"triggerSave"),1E3*this.options.draftAutosave)}else console.error("No draft URL specified.")},triggerSave:function(){if(!XF.isRedirecting){var a=c.Event("draft:beforesave");this.$target.trigger(a);a.isDefaultPrevented()||this._executeDraftAction(this.getSaveData())}},triggerDelete:function(){this.lastActionContent=this.getSaveData();this._sendDraftAction("delete=1")},_executeDraftAction:function(a){if(a!=
this.lastActionContent){if(this.autoSaveRunning)return!1;this.lastActionContent=a;this._sendDraftAction(a)}},_sendDraftAction:function(a){this.autoSaveRunning=!0;var b=this;return XF.ajax("post",this.options.draftUrl,a,XF.proxy(this,"completeAction"),{skipDefault:!0,skipError:!0,global:!1}).always(function(){b.autoSaveRunning=!1})},completeAction:function(a){var b=c.Event("draft:complete");this.$target.trigger(b,a);if(!b.isDefaultPrevented()){var g=this.$target.find(this.options.actionIndicator);
g.removeClass("is-active").text(a.complete).addClass("is-active");setTimeout(function(){g.removeClass("is-active")},2E3)}},syncState:function(){this.lastActionContent=this.getSaveData()},getSaveData:function(){var a=this.$target;a.trigger("draft:beforesync");return a.serialize().replace(/(^|&)_xfToken=[^&]+(?=&|$)/g,"").replace(/^&+/,"")}});XF.FocusTrigger=XF.Element.newHandler({options:{display:null,activeClass:"is-active"},init:function(){if(this.$target.attr("autofocus"))this.trigger();else this.$target.one("focusin",
XF.proxy(this,"trigger"))},trigger:function(){var a=this.options.display;a&&(a=XF.findRelativeIf(a,this.$target),a.length&&a.addClassTransitioned(this.options.activeClass))}});XF.PollBlock=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",XF.proxy(this,"afterSubmit"))},afterSubmit:function(a,b){if(!b.errors&&!b.exception){a.preventDefault();b.redirect&&XF.redirect(b.redirect);var c=this;XF.setupHtmlInsert(b.html,function(a,b){a.hide();a.insertAfter(c.$target);
c.$target.xfFadeUp(null,function(){c.$target.remove();a.xfFadeDown()})})}}});XF.Preview=XF.Element.newHandler({options:{previewUrl:null,previewButton:"button.js-previewButton"},previewing:null,init:function(){var a=this.$target,b=XF.findRelativeIf(this.options.previewButton,a);if(this.options.previewUrl)if(b.length)b.on({click:XF.proxy(this,"preview")});else console.warn("Preview form has no preview button: %o",a);else console.warn("Preview form has no data-preview-url: %o",a)},preview:function(a){a.preventDefault();
if(this.previewing)return!1;this.previewing=!0;var b=this;XF.ajax("post",this.options.previewUrl,this.$target.serializeArray(),function(a){a.html&&XF.setupHtmlInsert(a.html,function(a,b,c){XF.overlayMessage(b.title,a)})}).always(function(){b.previewing=!1})}});XF.ShareButtons=XF.Element.newHandler({options:{buttons:".shareButtons-button",iconic:".shareButtons--iconic"},pageTitle:null,pageDesc:null,pageUrl:null,clipboard:null,init:function(){var a=this.options.buttons,b=this.options.iconic;this.$target.on("focus mouseenter",
a,XF.proxy(this,"focus")).on("click",a,XF.proxy(this,"click"));"string"==typeof b&&(b=this.$target.is(b));this.$target.find(a).each(function(){var a=c(this);b&&XF.Element.applyHandler(a,"element-tooltip",{element:"> span"});a.data("clipboard")&&Clipboard.isSupported()&&a.removeClass("is-hidden")})},setupPageData:function(){this.pageTitle=c('meta[property="og:title"]').attr("content");this.pageTitle||(this.pageTitle=c("title").text());this.pageUrl=c('meta[property="og:url"]').attr("content");this.pageUrl||
(this.pageUrl=d.location.href);if(this.pageDesc=c('meta[property="og:description"]').attr("content"))this.pageDesc=c("meta[name=description]").attr("content")||""},focus:function(a){var b=c(a.currentTarget);if(!b.attr("href")){this.pageUrl||this.setupPageData();var d=b.data("href");if(d)d=d.replace("{url}",encodeURIComponent(this.pageUrl)).replace("{title}",encodeURIComponent(this.pageTitle)),b.attr("href",d);else if(!b.data("clipboard"))console.error("No data-href on share button %o",a.currentTarget);
else if(!this.clipboard){var e=this;this.clipboard=new Clipboard(b[0],{text:function(a){return c(a).data("clipboard").replace("{url}",e.pageUrl).replace("{title}",e.pageTitle)}});this.clipboard.on("success",function(){XF.flashMessage(XF.phrase("link_copied_to_clipboard"),3E3)})}}},click:function(a){var b=c(a.currentTarget).attr("href");!b||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||!b.match(/^https?:/i)||(a.preventDefault(),d.open(b,"share","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=400,left="+
(screen.width-600)/2+",top="+(screen.height-400)/2))}});XF.ShareInput=XF.Element.newHandler({options:{button:".js-shareButton",input:".js-shareInput"},init:function(){var a=this.$target.find(this.options.button),b=this.$target.find(this.options.input);Clipboard.isSupported()&&a.removeClass("is-hidden");(new Clipboard(a[0],{target:function(a){return b[0]}})).on("success",XF.proxy(this,"success"));b.on("click",XF.proxy(this,"click"))},success:function(){XF.flashMessage(XF.phrase("text_copied_to_clipboard"),
3E3)},click:function(a){c(a.target).select()}});XF.Click.register("attribution","XF.AttributionClick");XF.Click.register("like","XF.LikeClick");XF.Click.register("preview-click","XF.PreviewClick");XF.Click.register("scroll-to","XF.ScrollToClick");XF.Click.register("switch","XF.SwitchClick");XF.Click.register("switch-overlay","XF.SwitchOverlayClick");XF.Element.register("draft","XF.Draft");XF.Element.register("focus-trigger","XF.FocusTrigger");XF.Element.register("poll-block","XF.PollBlock");XF.Element.register("preview",
"XF.Preview");XF.Element.register("share-buttons","XF.ShareButtons");XF.Element.register("share-input","XF.ShareInput")}(jQuery,window,document);
