/*
 * XenForo notice.min.js
 * Copyright 2010-2018 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,g,c){a instanceof String&&(a=String(a));for(var h=a.length,b=0;b<h;b++){var e=a[b];if(g.call(c,e,b,a))return{i:b,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,c){a!=Array.prototype&&a!=Object.prototype&&(a[g]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,g,c,h){if(g){c=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var b=a[h];b in c||(c[b]={});c=c[b]}a=a[a.length-1];h=c[a];g=g(h);g!=h&&null!=g&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
!function(a,g,c,h){XF.Notices=XF.Element.newHandler({options:{type:"block",target:".js-notice",scrollInterval:5},$notices:null,slider:null,dismissing:!1,init:function(){this.updateNoticeList();this.filter();this.handleNoticeListChange()&&(this.$target.on("click",".js-noticeDismiss",XF.proxy(this,"dismiss")),this.start())},updateNoticeList:function(){return this.$notices=this.$target.find(this.options.target).not(".clone")},handleNoticeListChange:function(){var b=this.$notices.length;b?1==b&&this.$target.removeClass("notices--isMulti"):
(this.slider&&(this.slider.destroy(),this.slider=null),this.$target.remove());return b},filter:function(){var b=this.getCookies(),e=!1;this.$notices.each(function(){var d=a(this),f=parseInt(d.data("notice-id"),10),k=d.data("visibility");b&&f&&-1!=a.inArray(f,b)&&(d.remove(),e=!0);k&&("none"==d.css("display")?(d.remove(),e=!0):d.addClass("is-vis-processed"))});e&&this.updateNoticeList()},start:function(){var b=this,e=this.$notices,d=this.options.type;if("floating"==d)e.each(function(){var e=a(this),
d=e.data("display-duration"),f=e.data("delay-duration"),c=e.data("auto-dismiss");f?setTimeout(function(){b.displayFloating(e,XF.config.speed.normal,d,c)},f):b.displayFloating(e,XF.config.speed.fast,d,c)});else if("scrolling"==d&&1<this.$notices.length)if(a.fn.lightSlider){if(!Modernizr.flexbox){var f=0;this.$notices.each(function(){f=Math.max(a(this).outerHeight(),f)});this.$notices.css("height",f)}this.slider=this.$target.lightSlider({item:1,addClass:"noticeScrollContainer",slideMargin:0,galleryMargin:0,
controls:!1,auto:!0,pause:1E3*this.options.scrollInterval,speed:Modernizr.flexbox?400:0,pauseOnHover:!0,loop:!0,rtl:XF.isRtl(),enableDrag:!1});a(g).on("resize",XF.proxy(this,"refreshSlider"))}else console.error("Lightslider must be loaded first.")},displayFloating:function(b,a,d,f){b.xfFadeDown(a,function(){d&&setTimeout(function(){b.xfFadeUp(XF.config.speed.normal);f&&b.find("a.js-noticeDismiss").trigger("click")},d)})},getCookies:function(){if(!XF.config.userId){var a=XF.Cookie.get("notice_dismiss");
a=a?a.split(","):[];for(var e=[],d,f=0;f<a.length;f++)(d=parseInt(a[f],10))&&e.push(d);return e}},dismiss:function(b){b.preventDefault();if(!this.dismissing){this.dismissing=!0;b=a(b.target);var e=b.parents(".js-notice"),d=parseInt(e.data("notice-id"),10),f=XF.config.userId,c=this.getCookies();f?XF.ajax("post",b.attr("href"),{},function(){},{skipDefault:!0}):d&&-1==a.inArray(d,c)&&(c.push(d),c.sort(function(a,b){return a-b}),XF.Cookie.set("notice_dismiss",c.join(",")));this.removeNotice(e);this.dismissing=
!1}},removeNotice:function(a){var b=this;if(this.slider){var d=this.$notices.length,c=this.slider.getCurrentSlideCount(),g=function(){a.remove();b.updateNoticeList();b.handleNoticeListChange()&&(b.refreshSlider(),b.slider.goToSlide(c))};1<d?(c>=b.slider.getTotalSlideCount()&&(c=1),this.slider.goToNextSlide(),setTimeout(g,500)):g()}else a.xfFadeUp(XF.config.speed.fast,function(){a.remove();b.updateNoticeList();b.handleNoticeListChange()})},refreshSlider:function(){this.$target.css("height","");this.slider.refresh()}});
XF.Element.register("notices","XF.Notices")}(jQuery,window,document);
