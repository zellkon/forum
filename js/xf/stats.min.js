/*
 * XenForo stats.min.js
 * Copyright 2010-2018 XenForo Ltd.
 * Released under the XenForo License Agreement: https://xenforo.com/license-agreement
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,c){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var g=a[b];if(e.call(c,g,b,a))return{i:b,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,c,f){if(e){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var b=a[f];b in c||(c[b]={});c=c[b]}a=a[a.length-1];f=c[a];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
!function(a,e,c,f){XF.Stats=XF.Element.newHandler({options:{data:"| .js-statsData",seriesLabels:"| .js-statsSeriesLabels",legend:"| .js-statsLegend",chart:"| .js-statsChart",maxTicks:9},$chart:null,chart:null,seriesLabels:{},labelMap:{},tooltipEl:null,init:function(){this.$chart=XF.findRelativeIf(this.options.chart,this.$target);var b={},g=XF.findRelativeIf(this.options.data,this.$target),c={},d=XF.findRelativeIf(this.options.seriesLabels,this.$target);try{b=a.parseJSON(g.first().html())||{}}catch(h){console.error("Stats data not valid: ",
h);return}try{c=a.parseJSON(d.first().html())||{}}catch(h){console.error("Series labels not valid: ",h)}this.seriesLabels=c;b=this.setupChartData(b);g=this.setupChartOptions(b);c=this.setupChartResponsive(b,g);this.createChart(b,g,c)},setupChartData:function(b){var g=[],c={},d=null,h=0,e=this;a.each(b,function(a,b){a=0;var k=b.averages;g.push(h);c[h]=b.label;if(null==d){d=[];for(var f in k)d.push({name:e.seriesLabels[f],data:[]})}for(var m in k)k.hasOwnProperty(m)&&(d[a].data.push({x:h,y:k[m]}),a++);
h++});this.labelMap=c;return{labels:g,series:d}},setupChartOptions:function(a){var b=a.labels,c=this;return{fullWidth:!0,lineSmooth:!1,axisY:{onlyInteger:!0,labelOffset:{x:0,y:6}},axisX:{type:Chartist.FixedScaleAxis,ticks:this.getTicks(b,this.options.maxTicks),low:b[0],high:b.length?b[b.length-1]:0,labelOffset:{x:0,y:4},labelInterpolationFnc:function(a,g){return a>=b[b.length-1]?"\u00a0":c.labelMap[a]}}}},getTicks:function(a,c){var b=[];c=Math.ceil(a.length/c);for(var d=0;d<a.length;d++)0==d%c&&b.push(a[d]);
return b},setupChartResponsive:function(a,c){return[["screen and (max-width: 800px)",{axisX:{ticks:this.getTicks(a.labels,Math.min(6,this.options.maxTicks))}}],["screen and (max-width: 500px)",{axisX:{ticks:this.getTicks(a.labels,Math.min(3,this.options.maxTicks))}}]]},createChart:function(b,c,f){this.chart=new Chartist.Line(this.$chart[0],b,c,f);var d=a("<span />");this.tooltipEl=new XF.TooltipElement(d,{html:!0});var h=this;this.$chart.on("mouseenter focusin",".ct-point",function(b){b=a(b.target);
var c=b.closest(".ct-series").attr("ct:series-name")||"",e=b.attr("ct:value").split(",");d.text(c+" - "+h.labelMap[e[0]]+": "+(e[1]||0));h.tooltipEl.setPositioner(b);h.tooltipEl.show()});this.$chart.on("mouseleave focusout",".ct-point",function(a){h.tooltipEl.hide()});var g=XF.findRelativeIf(this.options.legend,this.$target),n=this.$chart,l=this.chart;g.length&&setTimeout(function(){a.each(l.data.series,function(b,c){b=c.className||l.options.classNames.series+"-"+Chartist.alphaNumerate(b);var d=n.find("."+
b).find(".ct-line, .ct-point").first();b=a("<li />");d.length&&(b.text(c.name),c=e.getComputedStyle(d[0]).getPropertyValue("stroke"),b.prepend(a("<i />").css("background",c)),g.append(b))})},0)}});XF.Element.register("stats","XF.Stats")}(jQuery,window,document);
