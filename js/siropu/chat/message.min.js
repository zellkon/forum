!function(d,c,a,e){var b=d("#siropuChat");XF.SiropuChat.MessageSave=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",d.proxy(this,"ajaxResponse"))},ajaxResponse:function(j,i){if(i.channel=="room"){var g=d(".siropuChatRoom")}else{var g=d(".siropuChatConversation")}var h=g.find(".siropuChatMessageRow[data-id="+i.message_id+"]");var f=d(i.message_html);if(d('ul[data-archive="true"]').length){f.find('a[data-xf-click="siropu-chat-quote"]').remove()}h.replaceWith(f);XF.activate(f);if(i.message){XF.flashMessage(i.message,1500)}}});XF.SiropuChat.MessageDelete=XF.Element.newHandler({options:{},init:function(){this.$target.on("ajax-submit:response",d.proxy(this,"ajaxResponse"))},ajaxResponse:function(h,g){if(g.channel=="room"){var f=d(".siropuChatRoom.siropuChatMessages")}else{var f=d(".siropuChatConversation.siropuChatMessages")}f.find(".siropuChatMessageRow[data-id="+g.message_id+"]").fadeOut();if(g.message){XF.flashMessage(g.message,1500)}setTimeout(function(){if(d("#siopuChatArchive").length&&!d(".siropuChatMessageRow:visible").length){location.reload()}},1000)}});XF.Element.register("siropu-chat-message-save","XF.SiropuChat.MessageSave");XF.Element.register("siropu-chat-message-delete","XF.SiropuChat.MessageDelete")}(jQuery,window,document);